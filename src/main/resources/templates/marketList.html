<!doctype html>
<html>
<head>
    <link href="../css/styles.css" rel="stylesheet" />
    <head th:include="fragments/headerLogged :: head"></head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Market List</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.4/dist/axios.min.js"></script>

</head>
<body>
<nav th:replace="fragments/headerLogged :: navbar"></nav>

<div id="app">
    <span class="userHomeTitle">Market list</span>
    <div class="frameContainer">

        <div class="tab">
            <button class="tablinks" :class="{ active: currentTab === 'listView' }" @click="changeTab('listView')" style="border-radius: 20px 0px 0px 0px">View by List</button>
            <button class="tablinks" :class="{ active: currentTab === 'mapView' }" @click="changeTab('mapView')" style="border-radius: 0px 20px 0px 0px">View by Map</button>
        </div>

        <!-- Tab content -->
        <div v-show="currentTab === 'listView'" class="tabcontent">
            <form @submit.prevent="searchMarkets">
                <input type="text" v-model="searchQuery" class="searchBox" placeholder="Search suburb..">
            </form>
            <div class="marketItemDiv">
                <div class="marketListItem" v-for="market in markets" :key="market.id">
                    <div class="marketListName">{{ market.name }}</div>
                    <div class="marketListSuburb">{{ market.suburb }}</div>
                    <div class="marketListAddress">{{ market.address }}</div>
                    <div class="marketListStall">{{ market.stall }}</div>
                    <img class="marketListImage" :src="market.image" :alt="market.name">
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'mapView'" class="tabcontent">
            <form @submit.prevent="searchMarkets">
                <input type="text" v-model="searchQuery" class="searchBox" placeholder="Search suburb..">
            </form>
        </div>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>


<script>
    new Vue({
        el: '#app',
        data: {
            currentTab: 'listView',
            searchQuery: '',
            markets: [
                {
                    id: 1,
                    name: 'Blacktown Markets',
                    suburb: 'Suburb: Prospect',
                    address: 'Address: Cricketers Arms Rd, Prospect NSW 2148',
                    stall: 'Total stall: 120',
                    image: '../image/blacktownImg.png'
                },
                // Add other market data as needed
            ]
        },
        methods: {
            changeTab(tabName) {
                this.currentTab = tabName;
            },
            searchMarkets() {
                // Implement the search logic or API call here
            }
        },
        mounted() {
            // Initialization or API call if needed
        }
    });
</script>

</body>
</html>