<!doctype html>
<html>
<head>
    <link href="../css/styles.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.3.5/jquery.timepicker.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Market Information</title>
</head>
<body>
<!--引入 templates/fragments/header.html中的navbar-->
<!--<nav th:replace="fragments/header :: navbar"></nav>-->

<!--这部分是你要写的部分-->
<span class="userHomeTitle"><a href="marketList.html" class="backBtn"></a>venueName</span>


<div class="frameContainer">

    <div class="tab">
        <button class="tablinks" onclick="openTabs(event, 'MarketInformation')" id="defaultOpen" style="width:33.3%; border-radius: 20px 0px 0px 0px" >Market Information</button>
        <button class="tablinks" onclick="openTabs(event, 'PhotoGallery')" style="width:33.3%">Photo Gallery</button>
        <button class="tablinks" onclick="openTabs(event, 'StallBooking')" style="width:33.4%; border-radius: 0px 20px 0px 0px">Booking a stall</button>
    </div>

    <!-- Tab content -->
    <div id="MarketInformation" class="tabcontent">
        <div class="venueDescription">description</div>
        <div class="venueAddress">street, state, suburb</div>
        <div class="openHour">openHour</div>
        <div class="stallNumber">Total stall: stall number</div>
    </div>

    <div id="PhotoGallery" class="tabcontent">
        <div class="photoVenue">photo Venue</div>
    </div>

    <div id="StallBooking" class="tabcontent" style="display: none; font-size: 18px">
        <!--        <label style="position: absolute; top:15%; left: 5%">Total stall number:</label>-->
        <!--        <input type="number" placeholder="Enter the total stall number" name="stallNum" class="stallNum">-->
        <!--        <span class="photoText" style="top:30%">Add stall distribution map (with stall number):</span>-->
        <!--        <input type="file" id="fileInput2" accept="image/*" class="photoInput2" multiple>-->
        <!--        <div id="imageContainer2" class="photoDiv2">-->
        <!--            <img id="displayImage2" class="displayImage2" src="" alt="Selected Image">-->
        <!--            <button id="deleteButton" class="delete-button2" style="display: none;">X</button>-->
        <!--        </div>-->
        <!--        <button type="submit" class="updateButton" onclick="">UPDATE</button>-->
    </div>



</div>
<div class="blackLayer" id="layer"></div>


<!--从templates/fragments/footer.html 引入的footer-->
<!--<div th:replace="fragments/footer :: footer"></div>-->

<!--你可以在下面添加自己想添加的JavaScript-->
<script>
    function openTabs(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    document.getElementById("defaultOpen").click();


    const fileInput = document.getElementById('fileInput');
    const imageContainer = document.getElementById('imageContainer');

    fileInput.addEventListener('change', (e) => {
        const files = e.target.files;
        let imageCount = imageContainer.querySelectorAll('.displayed-image').length;

        for (let i = 0; i < files.length; i++) {
            const file = files[i];

            if (imageCount >= 8) {
                alert('Maximum of 8 photos reached.');
                break;
            }

            const imageElement = document.createElement('div');
            imageElement.classList.add('image-wrapper');

            const img = document.createElement('img');
            img.classList.add('displayed-image');

            const deleteButton = document.createElement('button');
            deleteButton.classList.add('delete-button');
            deleteButton.textContent = 'X';

            const reader = new FileReader();

            reader.onload = (event) => {
                img.src = event.target.result;
            };

            reader.readAsDataURL(file);

            // Add a click event listener to the delete button
            deleteButton.addEventListener('click', () => {
                imageContainer.removeChild(imageElement);
                imageCount--;
            });

            imageElement.appendChild(img);
            imageElement.appendChild(deleteButton);

            // Append the new photo to the container
            imageContainer.appendChild(imageElement);

            imageCount++;
        }

        // Clear the file input to allow adding more files
        fileInput.value = '';
    });

    const fileInput2 = document.getElementById('fileInput2');
    const imageContainer2 = document.getElementById('imageContainer2');
    const displayImage = document.getElementById('displayImage2');
    const deleteButton = document.getElementById('deleteButton');

    fileInput2.addEventListener('change', (e) => {
        const file = e.target.files[0];

        if (file) {
            const reader = new FileReader();

            reader.onload = (event) => {
                displayImage.src = event.target.result;
                displayImage.style.display = 'block';
                deleteButton.style.display = 'inline-block';
            };

            reader.readAsDataURL(file);
        }
    });

    deleteButton.addEventListener('click', () => {
        displayImage.src = '';
        fileInput2.value = '';
        deleteButton.style.display = 'none';
        displayImage.style.display ='none';
    });






    function openREForm() {
        document.getElementById("reForm").style.display = "block";
        document.getElementById("layer").style.display = "block";
    }
    function closeREForm() {
        document.getElementById("reForm").style.display = "none";
        document.getElementById("layer").style.display = "none";
    }

    function approveClick() {
        document.getElementById("review2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }

    function denyClick() {
        document.getElementById("deny2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }

    function approveFormClick() {
        document.getElementById("reForm").style.display = "none";
        document.getElementById("layer").style.display = "none";
        document.getElementById("review2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }

    function denyFormClick() {
        document.getElementById("reForm").style.display = "none";
        document.getElementById("layer").style.display = "none";
        document.getElementById("deny2").style.display = "block";
        document.getElementById("review").style.display = "none";
        document.getElementById("approve").style.display = "none";
        document.getElementById("deny").style.display = "none";
    }


</script>

</body>
</html>